<header>
  <%= render 'shared/nav' %>
</header>
<section class="home-page container-fluid">
  <div class="row">
    <article class="col-12 col-md-9 text-orange p-0 vh-60 p-relative">
      <% if @articles.collect(&:image).detect(&:attached?) %>
        <div style="background: url(<%= url_for(most_voted(@articles).image) %>); background-size: 100% 100%; height: 100%;" class="ph ph-index">
          <div class='featured-text'>
            <p class="most-voted-title text-orange font-weight-bold"><%= most_voted(@articles).title %></p>
            <strong><%= link_to most_voted(@articles).text[0..100] + '...', article_path(most_voted(@articles)), class: 'text-white' %></strong>
          </div>
        </div>
      <% end %>
    </article>
    <aside class="col-md-3 user-activity text-white p-0">
      <h5 class="text-white transparent-bg pl-4 py-2">User Activity Board</h5>
      <ul class="list-group">
        <% @users.each do |user| %>
          <li class="list-group-item text-orange bg-transparent">
            <span>@<%= user.username %></span> -
            <%= pluralize(user.authored_articles.count, 'article') %> -
            <%= link_to 'Follow', '#', class: 'text-orange' %>
          </li>
        <% end %>
      </ul>
    </aside>
  </div>
  <div class="row">
    <% @sorted_categories.each do |category| %>
      <article class="col-6 col-md-3 p-0">
        <% if category.articles.last.image.attached? %>
          <div style="background: url(<%= url_for(category.articles.last.image) %>); background-size: cover;" class="ph ph-index">
          <% end %>
          <%= link_to category.name.upcase, category_path(id: category.id), class: 'article-category text-white' %>
          <%= link_to category.articles.last.title, article_path(category.articles.last), class: 'title-index text-white' %>
        </div>
      </article>
    <% end %>
  </div>
</section>
